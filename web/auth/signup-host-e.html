<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>Pinot - Alta R√°pida de Anfitri√≥n</title>
  <meta name="theme-color" content="#6b21a8" />
  <meta name="description" content="Reg√≠strate como anfitri√≥n para crear eventos de cata a ciegas" />
  <base href="/">
  
  <script>
    // Suprimir warning de producci√≥n de Tailwind CDN antes de cargar
    const originalWarn = console.warn;
    console.warn = function(...args) {
      if (args[0] && typeof args[0] === 'string' && args[0].includes('cdn.tailwindcss.com should not be used in production')) {
        return;
      }
      originalWarn.apply(console, args);
    };
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    setTimeout(() => {
      console.warn = console.warn || (() => {});
    }, 1000);
  </script>
  
  <!-- Google reCAPTCHA v3 -->
  <script src="https://www.google.com/recaptcha/api.js?render=6LfqsDEsAAAAAJadPQ6_AMonxbeTBqqRWVXxCNvt"></script>
  
  <!-- Fuentes personalizadas -->
  <link rel="stylesheet" href="/css/fonts.css">
  
  <style>
    body { 
      font-family: system-ui, -apple-system, Inter, Segoe UI, Roboto, sans-serif; 
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }
    
    .glass-effect {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .input-focus:focus {
      outline: none;
      ring: 2px;
      ring-color: rgba(255, 255, 255, 0.5);
      border-color: rgba(255, 255, 255, 0.5);
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      transition: all 0.3s ease;
    }
    
    .btn-primary:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }
    
    .btn-primary:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    
    .spinner {
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-top: 3px solid white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      animation: spin 1s linear infinite;
      display: inline-block;
      margin-right: 8px;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .success-message {
      background: rgba(34, 197, 94, 0.1);
      border: 1px solid rgba(34, 197, 94, 0.3);
      backdrop-filter: blur(10px);
    }
    
    .error-message {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      backdrop-filter: blur(10px);
    }
  </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
  <div class="w-full max-w-md">
    <!-- Logo/Header -->
    <div class="text-center mb-8 fade-in">
      <h1 class="text-4xl font-bold text-white mb-2 font-branding">Pinot</h1>
      <p class="text-white/80 text-lg" id="pageSubtitle">Alta R√°pida de Anfitri√≥n</p>
    </div>
    
    <!-- Formulario de Alta (por defecto) -->
    <div id="signupFormContainer" class="glass-effect rounded-2xl p-8 shadow-2xl fade-in">
      <form id="formSignupHost" class="space-y-6">
        <!-- Alias -->
        <div>
          <label for="alias" class="block text-white font-medium mb-2">
            Alias <span class="text-red-300">*</span>
          </label>
          <input
            type="text"
            id="alias"
            name="alias"
            required
            minlength="2"
            maxlength="50"
            placeholder="Tu alias o nombre de usuario"
            class="w-full px-4 py-3 rounded-lg bg-white/20 text-white placeholder-white/50 border border-white/30 input-focus focus:bg-white/30 transition-all"
            autocomplete="username"
          />
          <p class="text-white/60 text-sm mt-1">M√≠nimo 2 caracteres. Este ser√° tu nombre visible.</p>
        </div>
        
        <!-- Nombre Completo -->
        <div>
          <label for="nombreCompleto" class="block text-white font-medium mb-2">
            Nombre Completo <span class="text-white/60 text-xs">(opcional)</span>
          </label>
          <input
            type="text"
            id="nombreCompleto"
            name="nombreCompleto"
            maxlength="100"
            placeholder="Tu nombre completo real"
            class="w-full px-4 py-3 rounded-lg bg-white/20 text-white placeholder-white/50 border border-white/30 input-focus focus:bg-white/30 transition-all"
            autocomplete="name"
          />
          <p class="text-white/60 text-sm mt-1">Opcional. Para uso interno y verificaci√≥n.</p>
        </div>
        
        <!-- Email -->
        <div>
          <label for="email" class="block text-white font-medium mb-2">
            Correo Electr√≥nico <span class="text-red-300">*</span>
          </label>
          <input
            type="email"
            id="email"
            name="email"
            required
            placeholder="tu@email.com"
            class="w-full px-4 py-3 rounded-lg bg-white/20 text-white placeholder-white/50 border border-white/30 input-focus focus:bg-white/30 transition-all"
            autocomplete="email"
          />
          <p class="text-white/60 text-sm mt-1">Te enviaremos un correo de confirmaci√≥n</p>
        </div>
        
        <!-- reCAPTCHA v3 (invisible, se ejecuta autom√°ticamente) -->
        </p>
        
        <!-- Mensajes de error/√©xito -->
        <div id="mensaje" class="hidden rounded-lg p-4 text-sm"></div>
        
        <!-- Bot√≥n Submit -->
        <button
          type="submit"
          id="btnEnviar"
          class="w-full btn-primary text-white font-semibold py-3 rounded-lg shadow-lg"
        >
          <span id="btnText">Crear Cuenta de Anfitri√≥n</span>
        </button>
        
        <!-- Bot√≥n alternativo: Ya soy anfitri√≥n -->
        <div class="text-center mt-4">
          <button
            type="button"
            id="btnYaSoyAnfitrion"
            class="text-white/80 hover:text-white text-sm underline bg-transparent border-none cursor-pointer"
          >
            Ya soy anfitri√≥n
          </button>
        </div>
        
        <!-- Link a inicio -->
        <div class="text-center mt-4">
          <a href="/" class="text-white/80 hover:text-white text-sm underline">
            Volver al inicio
          </a>
        </div>
      </form>
      
      <!-- Mensaje de √©xito (oculto inicialmente) -->
      <div id="mensajeExito" class="hidden success-message rounded-lg p-6 mt-6 text-center">
        <div class="text-green-400 text-4xl mb-4">‚úì</div>
        <h3 class="text-white font-semibold text-lg mb-2">¬°Cuenta creada exitosamente!</h3>
        <div class="text-white/90 text-sm mb-4 space-y-2">
          <p class="font-medium">üìß Verifica tu correo electr√≥nico</p>
          <p>
            Te hemos enviado un correo de confirmaci√≥n a tu buz√≥n. Por favor:
          </p>
          <ol class="list-decimal list-inside text-left max-w-md mx-auto space-y-1 mt-3">
            <li>Revisa tu bandeja de entrada (y la carpeta de spam)</li>
            <li>Haz clic en el enlace de verificaci√≥n del email</li>
            <li>Confirma tu cuenta para activarla completamente</li>
          </ol>
        </div>
        <p class="text-white/70 text-xs mb-4">
          Ser√°s redirigido al inicio de sesi√≥n en unos segundos...
        </p>
        <a href="/auth/login-host.html" class="text-white underline hover:text-white/80">
          Ir al inicio de sesi√≥n ahora
        </a>
      </div>
    </div>
    
    <!-- Formulario de Login (oculto inicialmente) -->
    <div id="loginFormContainer" class="glass-effect rounded-2xl p-8 shadow-2xl fade-in hidden">
      <form id="formLoginHost" class="space-y-6">
        <!-- Email -->
        <div>
          <label for="loginEmail" class="block text-white font-medium mb-2">
            Correo Electr√≥nico <span class="text-red-300">*</span>
          </label>
          <input
            type="email"
            id="loginEmail"
            name="loginEmail"
            required
            placeholder="tu@email.com"
            class="w-full px-4 py-3 rounded-lg bg-white/20 text-white placeholder-white/50 border border-white/30 input-focus focus:bg-white/30 transition-all"
            autocomplete="email"
          />
        </div>
        
        <!-- Sesi√≥n ID (opcional, para anfitriones ef√≠meros) -->
        <div>
          <label for="loginSesionId" class="block text-white font-medium mb-2">
            ID de Sesi√≥n <span class="text-white/60 text-xs">(opcional)</span>
          </label>
          <input
            type="text"
            id="loginSesionId"
            name="loginSesionId"
            placeholder="ANF-..."
            class="w-full px-4 py-3 rounded-lg bg-white/20 text-white placeholder-white/50 border border-white/30 input-focus focus:bg-white/30 transition-all"
            autocomplete="off"
          />
          <p class="text-white/60 text-xs mt-1">Si tienes un ID de sesi√≥n guardado, ingr√©salo aqu√≠</p>
        </div>
        
        <!-- Mensajes de error/√©xito -->
        <div id="loginMensaje" class="hidden rounded-lg p-4 text-sm"></div>
        
        <!-- Bot√≥n Submit -->
        <button
          type="submit"
          id="btnLoginEnviar"
          class="w-full btn-primary text-white font-semibold py-3 rounded-lg shadow-lg"
        >
          <span id="btnLoginText">Ingresar</span>
        </button>
        
        <!-- Bot√≥n alternativo: Crear cuenta -->
        <div class="text-center mt-4">
          <button
            type="button"
            id="btnCrearCuenta"
            class="text-white/80 hover:text-white text-sm underline bg-transparent border-none cursor-pointer"
          >
            Crear nueva cuenta
          </button>
        </div>
        
        <!-- Link a inicio -->
        <div class="text-center mt-4">
          <a href="/" class="text-white/80 hover:text-white text-sm underline">
            Volver al inicio
          </a>
        </div>
      </form>
    </div>
    
    <!-- Footer -->
    <div class="text-center mt-8 text-white/60 text-sm">
      <p id="footerText">Al registrarte, aceptas nuestros t√©rminos de servicio</p>
    </div>
  </div>
  
  <script type="module" src="/js/signup-host-e.js"></script>
</body>
</html>
